<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Web OS</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      color: white;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* üåÜ Fonds d‚Äô√©cran responsifs Unsplash */
    body {
      background: url('https://images.unsplash.com/photo-1508921912186-1d1a45ebb3c1?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
      background-size: cover;
    }
    @media (max-width: 1024px) {
      body {
        background: url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1280&q=80') no-repeat center center fixed;
        background-size: cover;
      }
    }
    @media (max-width: 600px) {
      body {
        background: url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=720&q=80') no-repeat center center fixed;
        background-size: cover;
      }
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
    }
    #clock {
      font-size: 1.2em;
    }
    #logout-btn {
      display: none;
      padding: 6px 12px;
      background: crimson;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: white;
    }

    /* Dock */
    #dock {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(8px);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 10px;
      overflow-x: auto;
      gap: 20px;
    }
    #dock a img {
      width: 48px;
      height: 48px;
      transition: transform 0.2s;
    }
    #dock a img:hover {
      transform: scale(1.1);
    }

    /* Explorer */
    #explorer {
      display: none;
      position: fixed;
      top: 15%;
      left: 20%;
      width: 60%;
      height: 60%;
      background: rgba(34,34,34,0.95);
      border-radius: 12px;
      padding: 20px;
      overflow-y: auto;
    }
    #explorer h2 {
      margin-bottom: 10px;
    }
    #explorer button {
      margin: 5px;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      #explorer {
        top: 10%;
        left: 10%;
        width: 80%;
        height: 70%;
      }
    }
    @media (max-width: 600px) {
      #explorer {
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 0;
      }
      #dock a img {
        width: 56px;
        height: 56px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div id="clock"></div>
    <button id="logout-btn" onclick="logout()">D√©connexion</button>
  </header>

  <!-- Connexion Google -->
  <div id="g_id_onload"
       data-client_id="908397631579-20c8p66k2ag6rkqhkc8u5r4nqaihndou.apps.googleusercontent.com"
       data-callback="handleCredentialResponse"
       data-auto_prompt="false"></div>
  <div class="g_id_signin"
       data-type="standard"
       data-size="large"
       data-theme="outline"
       data-text="signin_with"
       data-shape="rectangular"
       data-logo_alignment="left"></div>

  <!-- Dock -->
  <nav id="dock">
    <a href="https://mail.google.com" target="_blank"><img src="https://www.gstatic.com/images/branding/product/1x/gmail_48dp.png" alt="Gmail"></a>
    <a href="https://www.youtube.com" target="_blank"><img src="https://www.gstatic.com/youtube/img/branding/favicon/favicon_144x144.png" alt="YouTube"></a>
    <a href="https://docs.google.com" target="_blank"><img src="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico" alt="Docs"></a>
    <a href="https://sheets.google.com" target="_blank"><img src="https://ssl.gstatic.com/docs/spreadsheets/favicon3.ico" alt="Sheets"></a>
    <a href="https://drive.google.com" target="_blank"><img src="https://ssl.gstatic.com/images/branding/product/2x/drive_2020q4_48dp.png" alt="Drive"></a>
    <a href="https://calendar.google.com" target="_blank"><img src="https://ssl.gstatic.com/calendar/images/dynamiclogo_2020q4/calendar_48_2x.png" alt="Agenda"></a>
    <a href="#" onclick="openExplorer()"><img src="https://img.icons8.com/material-rounded/48/ffffff/folder-invoices.png" alt="Explorateur"></a>
  </nav>

  <!-- Explorateur -->
  <div id="explorer">
    <h2>Explorateur de fichiers</h2>
    <button onclick="openFile()">üìÇ Ouvrir</button>
    <button onclick="saveFile()">üíæ Sauvegarder</button>
    <button onclick="closeExplorer()">‚ùå Fermer</button>
    <pre id="file-content"></pre>
  </div>

  <script>
    // Google Login
    function handleCredentialResponse(response) {
      document.querySelector('.g_id_signin').style.display = 'none';
      document.getElementById('dock').style.display = 'flex';
      document.getElementById('logout-btn').style.display = 'block';
    }
    function logout() {
      google.accounts.id.disableAutoSelect();
      document.querySelector('.g_id_signin').style.display = 'block';
      document.getElementById('dock').style.display = 'none';
      document.getElementById('logout-btn').style.display = 'none';
    }

    // Clock
    function updateClock() {
      const now = new Date();
      document.getElementById('clock').textContent = now.toLocaleTimeString();
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Explorateur
    async function openFile() {
      try {
        const [fileHandle] = await window.showOpenFilePicker();
        const file = await fileHandle.getFile();
        const text = await file.text();
        document.getElementById('file-content').textContent = text;
      } catch (err) {
        console.log('Ouverture annul√©e', err);
      }
    }
    async function saveFile() {
      try {
        const handle = await window.showSaveFilePicker({
          suggestedName: "nouveau.txt"
        });
        const writable = await handle.createWritable();
        await writable.write("Exemple de contenu sauvegard√© !");
        await writable.close();
        alert("Fichier sauvegard√© !");
      } catch (err) {
        console.log('Sauvegarde annul√©e', err);
      }
    }
    function openExplorer() {
      document.getElementById('explorer').style.display = 'block';
    }
    function closeExplorer() {
      document.getElementById('explorer').style.display = 'none';
    }
  </script>
</body>
</html>
